function insetImages(a){var f,g,b=document.getElementById("answer_content_ifr")?document.getElementById("answer_content_ifr"):document.getElementById("question_detail_ifr"),c=b.contentWindow.document.getElementById("tinymce"),d=a.parentNode.parentNode.getElementsByTagName("span")[0].getAttribute("rel"),e='<img src="'+d+'"/>';c.designMode="On","ie"==getBrowser()?(c.focus(),o=b.document.selection.createRange(),o.pasteHTML(e)):(c.focus(),f=b.contentWindow.getSelection().getRangeAt(0),g=f.createContextualFragment(e),f.insertNode(g))}function getBrowser(){var a=window.navigator.userAgent.toLowerCase();return a.indexOf("msie")>0?"ie":a.indexOf("firefox")>0?"ff":a.indexOf("chrome")>0?"chrome":void 0}function _ajax_uploader_delete_attach(a,b){var c=b;$.get(a,function(a){"-1"==a.errno?$.alert(a.err):(c.fadeOut(),c.remove())},"json")}function _ajax_uploader_append_file(a,b){var d,c="";"undefined"!=typeof b.thumb&&(c="string"!=typeof b.thumb?b.thumb.90x90:b.thumb),d='<dl><dt class="aw-icon upload-'+b.class_name+'" '+(null==c||""==c?"":'style="background-image:url('+c+')"')+"></dt>"+"<dd>"+'<p class="_ajax_upload-file aw-file-uploader-name" title="'+b.file_name+'">'+b.file_name.substring(0,10)+"...</p>"+'<p class="_ajax_upload-inset"><a href="'+b.delete_link+'" class="_ajax_upload_delete_file" onclick="if (confirm(\''+_t("确认删除?")+"')) { _ajax_uploader_delete_attach(this.href, $(this).parents('dl')) } return false;\">"+_t("删除")+"</a> ","undefined"!=typeof b.thumb&&"undefined"!=typeof b.attach_id&&(d+='<a href="javascript:;" onclick="insert_attach(this, '+b.attach_id+",'"+b.attach_tag+"')\">"+_t("插入")+"</a>"),d+="</p></dd></dl>",$(a).append(d)}var Hogan,com,_ajax_uploader;!function(a){"use strict";a(function(){a.support.transition=function(){var a=function(){var c,a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(c in b)if(void 0!==a.style[c])return b[c]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var d,b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed").remove()}var f,d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),f=a(e),b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.on(a.support.transition.end,c):c())},d=a.fn.alert,a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){"use strict";var c,b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")},c=a.fn.button,a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f="object"==typeof c&&c;e||d.data("button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){"use strict";var c,b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),d=this;if(!(b>this.$items.length-1||0>b))return this.sliding?this.$element.one("slid",function(){d.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(b,c){var j,d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h](),j=a.Event("slide",{relatedTarget:e[0],direction:g}),!e.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(j),j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})}else{if(this.$element.trigger(j),j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}}},c=a.fn.carousel,a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var d,g,c=a(this),e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),c.data());e.carousel(f),(g=c.attr("data-slide-to"))&&e.data("carousel").pause().to(g).cycle(),b.preventDefault()})}(window.jQuery),!function(a){"use strict";var c,b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(!this.transitioning&&!this.$element.hasClass("in")){if(b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in"),d&&d.length){if(e=d.data("collapse"),e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;!this.transitioning&&this.$element.hasClass("in")&&(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[null!==a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){"show"==c.type&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c),c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},c=a.fn.collapse,a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),"object"==typeof c&&c);e||d.data("collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var d,c=a(this),e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();c[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){"use strict";function b(){a(".dropdown-backdrop").remove(),a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var d,c=b.attr("data-target");return c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,"")),d=c&&a(c),d&&d.length||(d=b.parent()),d}var f,d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(){var f,g,e=a(this);if(!e.is(".disabled, :disabled"))return f=c(e),g=f.hasClass("open"),b(),g||("ontouchstart"in document.documentElement&&a('<div class="dropdown-backdrop"/>').insertBefore(a(this)).on("click",b),f.toggleClass("open")),e.focus(),!1},keydown:function(b){var e,f,h,i,j;if(/(38|40|27)/.test(b.keyCode)&&(e=a(this),b.preventDefault(),b.stopPropagation(),!e.is(".disabled, :disabled"))){if(h=c(e),i=h.hasClass("open"),!i||i&&27==b.keyCode)return 27==b.which&&h.find(d).focus(),e.click();f=a("[role=menu] li:not(.divider):visible a",h),f.length&&(j=f.index(f.filter(":focus")),38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<f.length-1&&j++,~j||(j=0),f.eq(j).focus())}}},f=a.fn.dropdown,a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),!function(a){"use strict";var c,b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault(),b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]!==a.target&&!b.$element.has(a.target).length&&b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var e,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){if(e=a.support.transition&&d,this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}},c=a.fn.modal,a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){"use strict";var c,b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var e,c=a.fn[this.type].defaults,d={};return this._options&&a.each(this._options,function(a,b){c[a]!=b&&(d[a]=b)},this),e=a(b.currentTarget)[this.type](d).data(this.type),e.options.delay&&e.options.delay.show?(clearTimeout(this.timeout),e.hoverState="in",this.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show),void 0):e.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),void 0):c.hide()},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var f,g,h,i,c=this.tip(),d=c[0].offsetWidth,e=c[0].offsetHeight;c.offset(a).addClass(b).addClass("in"),f=c[0].offsetWidth,g=c[0].offsetHeight,"top"==b&&g!=e&&(a.top=a.top+e-g,i=!0),"bottom"==b||"top"==b?(h=0,a.left<0&&(h=-2*a.left,a.left=0,c.offset(a),f=c[0].offsetWidth,g=c[0].offsetHeight),this.replaceArrow(h-d+f,f,"left")):this.replaceArrow(g-e,g,"top"),i&&c.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){d.off(a.support.transition.end).detach()},500);d.one(a.support.transition.end,function(){clearTimeout(b),d.detach()})}var d=this.tip(),e=a.Event("hide");return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():d.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},c=a.fn.tooltip,a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){"use strict";var c,b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=("function"==typeof c.content?c.content.call(b[0]):c.content)||b.attr("data-content")},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),c=a.fn.popover,a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f="object"==typeof c&&c;e||d.data("popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){"use strict";function b(b,c){var f,d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll-spy.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var c,b=this;this.offsets=a([]),this.targets=a([]),c=this.$body.find(this.selector).map(function(){var c=a(this),d=c.data("target")||c.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(b.$scrollElement.get(0))&&b.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var g,a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f="object"==typeof c&&c;e||d.data("scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var c,b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var e,f,g,b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target");d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),b.parent("li").hasClass("active")||(e=c.find(".active:last a")[0],g=a.Event("show",{relatedTarget:e}),b.trigger(g),g.isDefaultPrevented()||(f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})))},activate:function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e):e(),f.removeClass("in")}},c=a.fn.tab,a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),!function(a){"use strict";var c,b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var e,b=[],c=[],d=[];e=a.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}},c=a.fn.typeahead,a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var c=a(this);c.data("typeahead")||c.typeahead(c.data())})}(window.jQuery),!function(a){"use strict";var c,b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var i,b=a(document).height(),c=this.$window.scrollTop(),d=this.$element.offset(),e=this.options.offset,f=e.bottom,g=e.top,h="affix affix-top affix-bottom";"object"!=typeof e&&(f=g=e),"function"==typeof g&&(g=e.top()),"function"==typeof f&&(f=e.bottom()),i=null!=this.unpin&&c+this.unpin<=d.top?!1:null!=f&&d.top+this.$element.height()>=b-f?"bottom":null!=g&&g>=c?"top":!1,this.affixed!==i&&(this.affixed=i,this.unpin="bottom"==i?d.top-c:null,this.$element.removeClass(h).addClass("affix"+(i?"-"+i:"")))}},c=a.fn.affix,a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof c&&c;e||d.data("affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),Hogan={},function(a,b){function c(a){return String(null===a||void 0===a?"":a)}a.Template=function(a,c,d,e){this.r=a||this.r,this.c=d,this.options=e,this.text=c||"",this.buf=b?[]:""},a.Template.prototype={r:function(){return""},v:function(a){return a=c(a),i.test(a)?a.replace(d,"&amp;").replace(e,"&lt;").replace(f,"&gt;").replace(g,"&#39;").replace(h,"&quot;"):a},t:c,render:function(a,b,c){return this.ri([a],b||{},c)},ri:function(a,b,c){return this.r(a,b,c)},rp:function(a,b,c,d){return(a=c[a])?(this.c&&"string"==typeof a&&(a=this.c.compile(a,this.options)),a.ri(b,c,d)):""},rs:function(a,b,c){var e,d=a[a.length-1];if(j(d))for(e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop();else c(a,b,this)},s:function(a,b,c,d,e,f,g){return j(a)&&0===a.length?!1:("function"==typeof a&&(a=this.ls(a,b,c,d,e,f,g)),c=""===a||!!a,!d&&c&&b&&b.push("object"==typeof a?a:b[b.length-1]),c)},d:function(a,b,c,d){var e=a.split("."),f=this.f(e[0],b,c,d),g=null;if("."===a&&j(b[b.length-2]))return b[b.length-1];for(a=1;a<e.length;a++)f&&"object"==typeof f&&e[a]in f?(g=f,f=f[e[a]]):f="";return d&&!f?!1:(!d&&"function"==typeof f&&(b.push(g),f=this.lv(f,b,c),b.pop()),f)},f:function(a,b,c,d){for(var e=!1,f=null,g=!1,h=b.length-1;h>=0;h--)if((f=b[h])&&"object"==typeof f&&a in f){e=f[a],g=!0;break}return g?(!d&&"function"==typeof e&&(e=this.lv(e,b,c)),e):d?!1:""},ho:function(a,b,c,d,e){var f=this.c,g=this.options;return g.delimiters=e,d=a.call(b,d),d=null==d?String(d):d.toString(),this.b(f.compile(d,g).render(b,c)),!1},b:b?function(a){this.buf.push(a)}:function(a){this.buf+=a},fl:b?function(){var a=this.buf.join("");return this.buf=[],a}:function(){var a=this.buf;return this.buf="",a},ls:function(a,b,c,d,e,f,g){b=b[b.length-1];var h=null;if(!d&&this.c&&0<a.length)return this.ho(a,b,c,this.text.substring(e,f),g);if(h=a.call(b),"function"==typeof h){if(d)return!0;if(this.c)return this.ho(h,b,c,this.text.substring(e,f),g)}return h},lv:function(a,b,d){return b=b[b.length-1],a=a.call(b),"function"==typeof a&&(a=c(a.call(b)),this.c&&~a.indexOf("{{"))?this.c.compile(a,this.options).render(b,d):c(a)
}};var d=/&/g,e=/</g,f=/>/g,g=/\'/g,h=/\"/g,i=/[&<>\"\']/,j=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}}("undefined"!=typeof exports?exports:Hogan),function(a){function b(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function c(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;e>d;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function d(a,b,c,e){var f,g,h,i,j;for(b=[],f=null,g=null;0<a.length;){if(g=a.shift(),!(f="#"==g.tag)&&!(f="^"==g.tag))a:{for(f=g,h=e,i=0,j=h.length;j>i;i++)if(h[i].o==f.n){f.tag="#",f=!0;break a}f=void 0}if(f)c.push(g),g.nodes=d(a,g.tag,c,e);else if("/"==g.tag){if(0===c.length)throw Error("Closing tag without opener: /"+g.n);if(f=c.pop(),a=g.n!=f.n){a:{for(a=0,c=e.length;c>a;a++)if(e[a].c==g.n&&e[a].o==f.n){e=!0;break a}e=void 0}a=!e}if(a)throw Error("Nesting error: "+f.n+" vs. "+g.n);return f.end=g.i,b}b.push(g)}if(0<c.length)throw Error("missing closing tag: "+c.pop().n);return b}function e(a){return a.replace(l,"\\\\").replace(i,'\\"').replace(j,"\\n").replace(k,"\\r")}function f(a){return~a.indexOf(".")?"d":"f"}function g(a){var b,c,d,h,i,j,k,l;for(b="",c=0,d=a.length;d>c;c++)h=a[c].tag,"#"==h?(h=a[c].nodes,i=f(a[c].n),j=a[c].i,k=a[c].end,l=a[c].otag+" "+a[c].ctag,h="if(_.s(_."+i+'("'+e(a[c].n)+'",c,p,1),c,p,0,'+j+","+k+',"'+l+'")){_.rs(c,p,function(c,p,_){'+g(h)+"});c.pop();}",b+=h):"^"==h?(h=a[c].nodes,h="if(!_.s(_."+f(a[c].n)+'("'+e(a[c].n)+'",c,p,1),c,p,1,0,0,"")){'+g(h)+"};",b+=h):"<"==h||">"==h?b+='_.b(_.rp("'+e(a[c].n)+'",c,p,"'+(a[c].indent||"")+'"));':"{"==h||"&"==h?(h="_.b(_.t(_."+f(a[c].n)+'("'+e(a[c].n)+'",c,p,0)));',b+=h):"\n"==h?b+='_.b("\\n"'+(a.length-1==c?"":" + i")+");":"_v"==h?(h="_.b(_.v(_."+f(a[c].n)+'("'+e(a[c].n)+'",c,p,0)));',b+=h):void 0===h&&(h='"'+e(a[c])+'"',b+="_.b("+h+");");return b}var h=/\S/,i=/\"/g,j=/\n/g,k=/\r/g,l=/\\/g,m={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};a.scan=function(a,d){function e(){0<l.length&&(n.push(new String(l)),l="")}function f(a,b){var c,d,f;if(e(),c=a)a:for(c=!0,d=q;d<n.length;d++)if(c=n[d].tag&&m[n[d].tag]<m._v||!n[d].tag&&null===n[d].match(h),!c){c=!1;break a}if(c)for(c=q;c<n.length;c++)n[c].tag||((f=n[c+1])&&">"==f.tag&&(f.indent=n[c].toString()),n.splice(c,1));else b||n.push({tag:"\n"});o=!1,q=n.length}var g=a.length,i=0,j=null,k=null,l="",n=[],o=!1,p=0,q=0,r="{{",s="}}";for(d&&(d=d.split(" "),r=d[0],s=d[1]),p=0;g>p;p++)0==i?c(r,a,p)?(--p,e(),i=1):"\n"==a.charAt(p)?f(o):l+=a.charAt(p):1==i?(p+=r.length-1,j=(k=m[a.charAt(p+1)])?a.charAt(p+1):"_v","="==j?(r=a,k=p,p="="+s,i=r.indexOf(p,k),s=b(r.substring(r.indexOf("=",k)+1,i)).split(" "),r=s[0],s=s[1],p=i+p.length-1,i=0):(k&&p++,i=2),o=p):c(s,a,p)?(n.push({tag:j,n:b(l),otag:r,ctag:s,i:"/"==j?o-s.length:p+r.length}),l="",p+=s.length-1,i=0,"{"==j&&("}}"==s?p++:(k=n[n.length-1],"}"===k.n.substr(k.n.length-1)&&(k.n=k.n.substring(0,k.n.length-1))))):l+=a.charAt(p);return f(o,!0),n},a.generate=function(b,c,d){return b='var _=this;_.b(i=i||"");'+g(b)+"return _.fl();",d.asString?"function(c,p,i){"+b+";}":new a.Template(new Function("c","p","i",b),c,a,d)},a.parse=function(a,b,c){return c=c||{},d(a,"",[],c.sectionTags||[])},a.cache={},a.compile=function(a,b){b=b||{};var c=a+"||"+!!b.asString,d=this.cache[c];return d?d:(d=this.generate(this.parse(this.scan(a,b.delimiters),a,b),a,b),this.cache[c]=d)}}("undefined"!=typeof exports?exports:Hogan),function(a){function b(a){return"object"==typeof a?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};c.defaults={axis:"xy",duration:1.3<=parseFloat(a.fn.jquery)?0:1,limit:!0},c.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return/webkit/i.test(navigator.userAgent)||"BackCompat"==b.compatMode?b.body:b.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"==d&&(d=9e9),f=a.extend({},c.defaults,f),e=e||f.duration,f.queue=f.queue&&1<f.axis.length,f.queue&&(e/=2),f.offset=b(f.offset),f.over=b(f.over),this._scrollable().each(function(){function g(a){i.animate(l,e,f.easing,a&&function(){a.call(this,d,f)})}if(d){var k,h=this,i=a(h),j=d,l={},m=i.is("html,body");switch(typeof j){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(j)){j=b(j);break}if(j=a(j,this),!j.length)return;case"object":(j.is||j.style)&&(k=(j=a(j)).offset())}a.each(f.axis.split(""),function(a,b){var d="x"==b?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=h[n],p=c.max(h,b);k?(l[n]=k[e]+(m?0:o-i.offset()[e]),f.margin&&(l[n]=l[n]-(parseInt(j.css("margin"+d))||0),l[n]=l[n]-(parseInt(j.css("border"+d+"Width"))||0)),l[n]=l[n]+(f.offset[e]||0),f.over[e]&&(l[n]=l[n]+j["x"==b?"width":"height"]()*f.over[e])):(d=j[e],l[n]=d.slice&&"%"==d.slice(-1)?parseFloat(d)/100*p:d),f.limit&&/^\d+$/.test(l[n])&&(l[n]=l[n]<=0?0:Math.min(l[n],p)),!a&&f.queue&&(o!=l[n]&&g(f.onAfterFirst),delete l[n])}),g(f.onAfter)}}).end()},c.max=function(b,c){var f,g,d="x"==c?"Width":"Height",e="scroll"+d;return a(b).is("html,body")?(d="client"+d,f=b.ownerDocument.documentElement,g=b.ownerDocument.body,Math.max(f[e],g[e])-Math.min(f[d],g[d])):b[e]-a(b)[d.toLowerCase()]()}}(jQuery),function(a,b,c,d){var e=c("html"),f=c(a),g=c(b),h=c.fancybox=function(){h.open.apply(this,arguments)},i=navigator.userAgent.match(/msie/i),j=null,k=b.createTouch!==d,l=function(a){return a&&a.hasOwnProperty&&a instanceof c},m=function(a){return a&&"string"===c.type(a)},n=function(a){return m(a)&&0<a.indexOf("%")},o=function(a,b){var c=parseInt(a,10)||0;return b&&n(a)&&(c*=h.getViewport()[b]/100),Math.ceil(c)},p=function(a,b){return o(a,b)+"px"};c.extend(h,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!k,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(i?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:c.noop,beforeLoad:c.noop,afterLoad:c.noop,beforeShow:c.noop,afterShow:c.noop,beforeChange:c.noop,beforeClose:c.noop,afterClose:c.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,b){return a&&(c.isPlainObject(b)||(b={}),!1!==h.close(!0))?(c.isArray(a)||(a=l(a)?c(a).get():[a]),c.each(a,function(e,f){var i,j,k,n,o,g={};"object"===c.type(f)&&(f.nodeType&&(f=c(f)),l(f)?(g={href:f.data("fancybox-href")||f.attr("href"),title:f.data("fancybox-title")||f.attr("title"),isDom:!0,element:f},c.metadata&&c.extend(!0,g,f.metadata())):g=f),i=b.href||g.href||(m(f)?f:null),j=b.title!==d?b.title:g.title||"",n=(k=b.content||g.content)?"html":b.type||g.type,!n&&g.isDom&&(n=f.data("fancybox-type"),n||(n=(n=f.prop("class").match(/fancybox\.(\w+)/))?n[1]:null)),m(i)&&(n||(h.isImage(i)?n="image":h.isSWF(i)?n="swf":"#"===i.charAt(0)?n="inline":m(f)&&(n="html",k=f)),"ajax"===n&&(o=i.split(/\s+/,2),i=o.shift(),o=o.shift())),k||("inline"===n?i?k=c(m(i)?i.replace(/.*(?=#[^\s]+$)/,""):i):g.isDom&&(k=f):"html"===n?k=i:!n&&!i&&g.isDom&&(n="inline",k=f)),c.extend(g,{href:i,type:n,content:k,title:j,selector:o}),a[e]=g}),h.opts=c.extend(!0,{},h.defaults,b),b.keys!==d&&(h.opts.keys=b.keys?c.extend({},h.defaults.keys,b.keys):!1),h.group=a,h._start(h.opts.index)):void 0},cancel:function(){var a=h.coming;a&&!1!==h.trigger("onCancel")&&(h.hideLoading(),h.ajaxLoad&&h.ajaxLoad.abort(),h.ajaxLoad=null,h.imgPreload&&(h.imgPreload.onload=h.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),h.coming=null,h.current||h._afterZoomOut(a))},close:function(a){h.cancel(),!1!==h.trigger("beforeClose")&&(h.unbindEvents(),h.isActive&&(h.isOpen&&!0!==a?(h.isOpen=h.isOpened=!1,h.isClosing=!0,c(".fancybox-item, .fancybox-nav").remove(),h.wrap.stop(!0,!0).removeClass("fancybox-opened"),h.transitions[h.current.closeMethod]()):(c(".fancybox-wrap").stop(!0).trigger("onReset").remove(),h._afterZoomOut())))},play:function(a){var b=function(){clearTimeout(h.player.timer)},c=function(){b(),h.current&&h.player.isActive&&(h.player.timer=setTimeout(h.next,h.current.playSpeed))},d=function(){b(),g.unbind(".player"),h.player.isActive=!1,h.trigger("onPlayEnd")};!0===a||!h.player.isActive&&!1!==a?h.current&&(h.current.loop||h.current.index<h.group.length-1)&&(h.player.isActive=!0,g.bind({"onCancel.player beforeClose.player":d,"onUpdate.player":c,"beforeLoad.player":b}),c(),h.trigger("onPlayStart")):d()},next:function(a){var b=h.current;b&&(m(a)||(a=b.direction.next),h.jumpto(b.index+1,a,"next"))},prev:function(a){var b=h.current;b&&(m(a)||(a=b.direction.prev),h.jumpto(b.index-1,a,"prev"))},jumpto:function(a,b,c){var e=h.current;e&&(a=o(a),h.direction=b||e.direction[a>=e.index?"next":"prev"],h.router=c||"jumpto",e.loop&&(0>a&&(a=e.group.length+a%e.group.length),a%=e.group.length),e.group[a]!==d&&(h.cancel(),h._start(a)))},reposition:function(a,b){var f,d=h.current,e=d?d.wrap:null;e&&(f=h._getPosition(b),a&&"scroll"===a.type?(delete f.position,e.stop(!0,!0).animate(f,200)):(e.css(f),d.pos=c.extend({},d.dim,f)))},update:function(a){var b=a&&a.type,c=!b||"orientationchange"===b;c&&(clearTimeout(j),j=null),h.isOpen&&!j&&(j=setTimeout(function(){var d=h.current;d&&!h.isClosing&&(h.wrap.removeClass("fancybox-tmp"),(c||"load"===b||"resize"===b&&d.autoResize)&&h._setDimension(),"scroll"===b&&d.canShrink||h.reposition(a),h.trigger("onUpdate"),j=null)},c&&!k?0:300))},toggle:function(a){h.isOpen&&(h.current.fitToView="boolean"===c.type(a)?a:!h.current.fitToView,k&&(h.wrap.removeAttr("style").addClass("fancybox-tmp"),h.trigger("onUpdate")),h.update())},hideLoading:function(){g.unbind(".loading"),c("#fancybox-loading").remove()},showLoading:function(){var a,b;h.hideLoading(),a=c('<div id="fancybox-loading"><div></div></div>').click(h.cancel).appendTo("body"),g.bind("keydown.loading",function(a){27===(a.which||a.keyCode)&&(a.preventDefault(),h.cancel())}),h.defaults.fixed||(b=h.getViewport(),a.css({position:"absolute",top:.5*b.h+b.y,left:.5*b.w+b.x}))},getViewport:function(){var b=h.current&&h.current.locked||!1,c={x:f.scrollLeft(),y:f.scrollTop()};return b?(c.w=b[0].clientWidth,c.h=b[0].clientHeight):(c.w=k&&a.innerWidth?a.innerWidth:f.width(),c.h=k&&a.innerHeight?a.innerHeight:f.height()),c},unbindEvents:function(){h.wrap&&l(h.wrap)&&h.wrap.unbind(".fb"),g.unbind(".fb"),f.unbind(".fb")},bindEvents:function(){var b,a=h.current;a&&(f.bind("orientationchange.fb"+(k?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),h.update),(b=a.keys)&&g.bind("keydown.fb",function(e){var f=e.which||e.keyCode,g=e.target||e.srcElement;return 27===f&&h.coming?!1:(!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||g&&(g.type||c(g).is("[contenteditable]"))||!c.each(b,function(b,g){return 1<a.group.length&&g[f]!==d?(h[b](g[f]),e.preventDefault(),!1):-1<c.inArray(f,g)?(h[b](),e.preventDefault(),!1):void 0})),void 0)}),c.fn.mousewheel&&a.mouseWheel&&h.wrap.bind("mousewheel.fb",function(b,d,e,f){for(var g=c(b.target||null),i=!1;g.length&&!i&&!g.is(".fancybox-skin")&&!g.is(".fancybox-wrap");)i=g[0]&&!(g[0].style.overflow&&"hidden"===g[0].style.overflow)&&(g[0].clientWidth&&g[0].scrollWidth>g[0].clientWidth||g[0].clientHeight&&g[0].scrollHeight>g[0].clientHeight),g=c(g).parent();0!==d&&!i&&1<h.group.length&&!a.canShrink&&(f>0||e>0?h.prev(f>0?"down":"left"):(0>f||0>e)&&h.next(0>f?"up":"right"),b.preventDefault())}))},trigger:function(a,b){var d,e=b||h.coming||h.current;if(e){if(c.isFunction(e[a])&&(d=e[a].apply(e,Array.prototype.slice.call(arguments,1))),!1===d)return!1;e.helpers&&c.each(e.helpers,function(b,d){d&&h.helpers[b]&&c.isFunction(h.helpers[b][a])&&h.helpers[b][a](c.extend(!0,{},h.helpers[b].defaults,d),e)}),g.trigger(a)}},isImage:function(a){return m(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return m(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var d,e,b={};if(a=o(a),d=h.group[a]||null,!d)return!1;if(b=c.extend(!0,{},h.opts,d),d=b.margin,e=b.padding,"number"===c.type(d)&&(b.margin=[d,d,d,d]),"number"===c.type(e)&&(b.padding=[e,e,e,e]),b.modal&&c.extend(!0,b,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),b.autoSize&&(b.autoWidth=b.autoHeight=!0),"auto"===b.width&&(b.autoWidth=!0),"auto"===b.height&&(b.autoHeight=!0),b.group=h.group,b.index=a,h.coming=b,!1===h.trigger("beforeLoad"))h.coming=null;else{if(e=b.type,d=b.href,!e)return h.coming=null,h.current&&h.router&&"jumpto"!==h.router?(h.current.index=a,h[h.router](h.direction)):!1;if(h.isActive=!0,("image"===e||"swf"===e)&&(b.autoHeight=b.autoWidth=!1,b.scrolling="visible"),"image"===e&&(b.aspectRatio=!0),"iframe"===e&&k&&(b.scrolling="scroll"),b.wrap=c(b.tpl.wrap).addClass("fancybox-"+(k?"mobile":"desktop")+" fancybox-type-"+e+" fancybox-tmp "+b.wrapCSS).appendTo(b.parent||"body"),c.extend(b,{skin:c(".fancybox-skin",b.wrap),outer:c(".fancybox-outer",b.wrap),inner:c(".fancybox-inner",b.wrap)}),c.each(["Top","Right","Bottom","Left"],function(a,c){b.skin.css("padding"+c,p(b.padding[a]))}),h.trigger("onReady"),"inline"===e||"html"===e){if(!b.content||!b.content.length)return h._error("content")}else if(!d)return h._error("href");"image"===e?h._loadImage():"ajax"===e?h._loadAjax():"iframe"===e?h._loadIframe():h._afterLoad()}},_error:function(a){c.extend(h.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:h.coming.tpl.error}),h._afterLoad()},_loadImage:function(){var a=h.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null,h.coming.width=this.width/h.opts.pixelRatio,h.coming.height=this.height/h.opts.pixelRatio,h._afterLoad()},a.onerror=function(){this.onload=this.onerror=null,h._error("image")},a.src=h.coming.href,!0!==a.complete&&h.showLoading()},_loadAjax:function(){var a=h.coming;h.showLoading(),h.ajaxLoad=c.ajax(c.extend({},a.ajax,{url:a.href,error:function(a,b){h.coming&&"abort"!==b?h._error("ajax",a):h.hideLoading()},success:function(b,c){"success"===c&&(a.content=b,h._afterLoad())}}))},_loadIframe:function(){var a=h.coming,b=c(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",k?"auto":a.iframe.scrolling).attr("src",a.href);c(a.wrap).bind("onReset",function(){try{c(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}}),a.iframe.preload&&(h.showLoading(),b.one("load",function(){c(this).data("ready",1),k||c(this).bind("load.fb",h.update),c(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),h._afterLoad()})),a.content=b.appendTo(a.inner),a.iframe.preload||h._afterLoad()},_preloadImages:function(){var e,f,a=h.group,b=h.current,c=a.length,d=b.preload?Math.min(b.preload,c-1):0;for(f=1;d>=f;f+=1)e=a[(b.index+f)%c],"image"===e.type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var d,e,f,g,i,a=h.coming,b=h.current;if(h.hideLoading(),a&&!1!==h.isActive)if(!1===h.trigger("afterLoad",a,b))a.wrap.stop(!0).trigger("onReset").remove(),h.coming=null;else{switch(b&&(h.trigger("beforeChange",b),b.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),h.unbindEvents(),d=a.content,e=a.type,f=a.scrolling,c.extend(h,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:b}),g=a.href,e){case"inline":case"ajax":case"html":a.selector?d=c("<div>").html(d).find(a.selector):l(d)&&(d.data("fancybox-placeholder")||d.data("fancybox-placeholder",c('<div class="fancybox-placeholder"></div>').insertAfter(d).hide()),d=d.show().detach(),a.wrap.bind("onReset",function(){c(this).find(d).length&&d.hide().replaceAll(d.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":d=a.tpl.image.replace("{href}",g);break;case"swf":d='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+g+'"></param>',i="",c.each(a.swf,function(a,b){d+='<param name="'+a+'" value="'+b+'"></param>',i+=" "+a+'="'+b+'"'}),d+='<embed src="'+g+'" type="application/x-shockwave-flash" width="100%" height="100%"'+i+"></embed></object>"}(!l(d)||!d.parent().is(a.inner))&&a.inner.append(d),h.trigger("beforeShow"),a.inner.css("overflow","yes"===f?"scroll":"no"===f?"hidden":f),h._setDimension(),h.reposition(),h.isOpen=!1,h.coming=null,h.bindEvents(),h.isOpened?b.prevMethod&&h.transitions[b.prevMethod]():c(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove(),h.transitions[h.isOpened?a.nextMethod:a.openMethod](),h._preloadImages()}},_setDimension:function(){var w,x,y,z,A,B,C,D,E,a=h.getViewport(),b=0,d=!1,e=!1,d=h.wrap,f=h.skin,g=h.inner,i=h.current,e=i.width,j=i.height,k=i.minWidth,l=i.minHeight,m=i.maxWidth,q=i.maxHeight,r=i.scrolling,s=i.scrollOutside?i.scrollbarWidth:0,t=i.margin,u=o(t[1]+t[3]),v=o(t[0]+t[2]);if(d.add(f).add(g).width("auto").height("auto").removeClass("fancybox-tmp"),t=o(f.outerWidth(!0)-f.width()),w=o(f.outerHeight(!0)-f.height()),x=u+t,y=v+w,z=n(e)?(a.w-x)*o(e)/100:e,A=n(j)?(a.h-y)*o(j)/100:j,"iframe"===i.type){if(E=i.content,i.autoHeight&&1===E.data("ready"))try{E[0].contentWindow.document.location&&(g.width(z).height(9999),B=E.contents().find("body"),s&&B.css("overflow-x","hidden"),A=B.outerHeight(!0))}catch(F){}}else(i.autoWidth||i.autoHeight)&&(g.addClass("fancybox-tmp"),i.autoWidth||g.width(z),i.autoHeight||g.height(A),i.autoWidth&&(z=g.width()),i.autoHeight&&(A=g.height()),g.removeClass("fancybox-tmp"));if(e=o(z),j=o(A),D=z/A,k=o(n(k)?o(k,"w")-x:k),m=o(n(m)?o(m,"w")-x:m),l=o(n(l)?o(l,"h")-y:l),q=o(n(q)?o(q,"h")-y:q),B=m,C=q,i.fitToView&&(m=Math.min(a.w-x,m),q=Math.min(a.h-y,q)),x=a.w-u,v=a.h-v,i.aspectRatio?(e>m&&(e=m,j=o(e/D)),j>q&&(j=q,e=o(j*D)),k>e&&(e=k,j=o(e/D)),l>j&&(j=l,e=o(j*D))):(e=Math.max(k,Math.min(e,m)),i.autoHeight&&"iframe"!==i.type&&(g.width(e),j=g.height()),j=Math.max(l,Math.min(j,q))),i.fitToView)if(g.width(e).height(j),d.width(e+t),a=d.width(),u=d.height(),i.aspectRatio)for(;(a>x||u>v)&&e>k&&j>l&&!(19<b++);)j=Math.max(l,Math.min(q,j-10)),e=o(j*D),k>e&&(e=k,j=o(e/D)),e>m&&(e=m,j=o(e/D)),g.width(e).height(j),d.width(e+t),a=d.width(),u=d.height();else e=Math.max(k,Math.min(e,e-(a-x))),j=Math.max(l,Math.min(j,j-(u-v)));s&&"auto"===r&&A>j&&x>e+t+s&&(e+=s),g.width(e).height(j),d.width(e+t),a=d.width(),u=d.height(),d=(a>x||u>v)&&e>k&&j>l,e=i.aspectRatio?B>e&&C>j&&z>e&&A>j:(B>e||C>j)&&(z>e||A>j),c.extend(i,{dim:{width:p(a),height:p(u)},origWidth:z,origHeight:A,canShrink:d,canExpand:e,wPadding:t,hPadding:w,wrapSpace:u-f.outerHeight(!0),skinSpace:f.height()-j}),!E&&i.autoHeight&&j>l&&q>j&&!e&&g.height("auto")},_getPosition:function(a){var b=h.current,c=h.getViewport(),d=b.margin,e=h.wrap.width()+d[1]+d[3],f=h.wrap.height()+d[0]+d[2],d={position:"absolute",top:d[0],left:d[3]};return b.autoCenter&&b.fixed&&!a&&f<=c.h&&e<=c.w?d.position="fixed":b.locked||(d.top+=c.y,d.left+=c.x),d.top=p(Math.max(d.top,d.top+(c.h-f)*b.topRatio)),d.left=p(Math.max(d.left,d.left+(c.w-e)*b.leftRatio)),d},_afterZoomIn:function(){var a=h.current;a&&(h.isOpen=h.isOpened=!0,h.wrap.css("overflow","visible").addClass("fancybox-opened"),h.update(),(a.closeClick||a.nextClick&&1<h.group.length)&&h.inner.css("cursor","pointer").bind("click.fb",function(b){!c(b.target).is("a")&&!c(b.target).parent().is("a")&&(b.preventDefault(),h[a.closeClick?"close":"next"]())}),a.closeBtn&&c(a.tpl.closeBtn).appendTo(h.skin).bind("click.fb",function(a){a.preventDefault(),h.close()}),a.arrows&&1<h.group.length&&((a.loop||0<a.index)&&c(a.tpl.prev).appendTo(h.outer).bind("click.fb",h.prev),(a.loop||a.index<h.group.length-1)&&c(a.tpl.next).appendTo(h.outer).bind("click.fb",h.next)),h.trigger("afterShow"),a.loop||a.index!==a.group.length-1?h.opts.autoPlay&&!h.player.isActive&&(h.opts.autoPlay=!1,h.play()):h.play(!1))},_afterZoomOut:function(a){a=a||h.current,c(".fancybox-wrap").trigger("onReset").remove(),c.extend(h,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),h.trigger("afterClose",a)}}),h.transitions={getOrigPosition:function(){var a=h.current,b=a.element,c=a.orig,d={},e=50,f=50,g=a.hPadding,i=a.wPadding,j=h.getViewport();return!c&&a.isDom&&b.is(":visible")&&(c=b.find("img:first"),c.length||(c=b)),l(c)?(d=c.offset(),c.is("img")&&(e=c.outerWidth(),f=c.outerHeight())):(d.top=j.y+(j.h-f)*a.topRatio,d.left=j.x+(j.w-e)*a.leftRatio),("fixed"===h.wrap.css("position")||a.locked)&&(d.top-=j.y,d.left-=j.x),d={top:p(d.top-g*a.topRatio),left:p(d.left-i*a.leftRatio),width:p(e+i),height:p(f+g)}},step:function(a,b){var c,e=b.prop,d=h.current,f=d.wrapSpace,g=d.skinSpace;("width"===e||"height"===e)&&(c=b.end===b.start?1:(a-b.start)/(b.end-b.start),h.isClosing&&(c=1-c),d="width"===e?d.wPadding:d.hPadding,d=a-d,h.skin[e](o("width"===e?d:d-f*c)),h.inner[e](o("width"===e?d:d-f*c-g*c)))},zoomIn:function(){var a=h.current,b=a.pos,d=a.openEffect,e="elastic"===d,f=c.extend({opacity:1},b);delete f.position,e?(b=this.getOrigPosition(),a.openOpacity&&(b.opacity=.1)):"fade"===d&&(b.opacity=.1),h.wrap.css(b).animate(f,{duration:"none"===d?0:a.openSpeed,easing:a.openEasing,step:e?this.step:null,complete:h._afterZoomIn})},zoomOut:function(){var a=h.current,b=a.closeEffect,c="elastic"===b,d={opacity:.1};c&&(d=this.getOrigPosition(),a.closeOpacity&&(d.opacity=.1)),h.wrap.animate(d,{duration:"none"===b?0:a.closeSpeed,easing:a.closeEasing,step:c?this.step:null,complete:h._afterZoomOut})},changeIn:function(){var f,a=h.current,b=a.nextEffect,c=a.pos,d={opacity:1},e=h.direction;c.opacity=.1,"elastic"===b&&(f="down"===e||"up"===e?"top":"left","down"===e||"right"===e?(c[f]=p(o(c[f])-200),d[f]="+=200px"):(c[f]=p(o(c[f])+200),d[f]="-=200px")),"none"===b?h._afterZoomIn():h.wrap.css(c).animate(d,{duration:a.nextSpeed,easing:a.nextEasing,complete:h._afterZoomIn})},changeOut:function(){var a=h.previous,b=a.prevEffect,d={opacity:.1},e=h.direction;"elastic"===b&&(d["down"===e||"up"===e?"top":"left"]=("up"===e||"left"===e?"-":"+")+"=200px"),a.wrap.animate(d,{duration:"none"===b?0:a.prevSpeed,easing:a.prevEasing,complete:function(){c(this).trigger("onReset").remove()}})}},h.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!k,fixed:!0},overlay:null,fixed:!1,el:c("html"),create:function(a){a=c.extend({},this.defaults,a),this.overlay&&this.close(),this.overlay=c('<div class="fancybox-overlay"></div>').appendTo(h.coming?h.coming.parent:a.parent),this.fixed=!1,a.fixed&&h.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var b=this;a=c.extend({},this.defaults,a),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a),this.fixed||(f.bind("resize.overlay",c.proxy(this.update,this)),this.update()),a.closeClick&&this.overlay.bind("click.overlay",function(a){return c(a.target).hasClass("fancybox-overlay")?(h.isActive?h.close():b.close(),!1):void 0}),this.overlay.css(a.css).show()},close:function(){var a,b;f.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(c(".fancybox-margin").removeClass("fancybox-margin"),a=f.scrollTop(),b=f.scrollLeft(),this.el.removeClass("fancybox-lock"),f.scrollTop(a).scrollLeft(b)),c(".fancybox-overlay").remove().hide(),c.extend(this,{overlay:null,fixed:!1})},update:function(){var c,a="100%";this.overlay.width(a).height("100%"),i?(c=Math.max(b.documentElement.offsetWidth,b.body.offsetWidth),g.width()>c&&(a=g.width())):g.width()>f.width()&&(a=g.width()),this.overlay.width(a).height(g.height())},onReady:function(a,b){var d=this.overlay;c(".fancybox-overlay").stop(!0,!0),d||this.create(a),a.locked&&this.fixed&&b.fixed&&(d||(this.margin=g.height()>f.height()?c("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1),!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var d,e;b.locked&&(!1!==this.margin&&(c("*").filter(function(){return"fixed"===c(this).css("position")&&!c(this).hasClass("fancybox-overlay")&&!c(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),d=f.scrollTop(),e=f.scrollLeft(),this.el.addClass("fancybox-lock"),f.scrollTop(d).scrollLeft(e)),this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!h.coming&&this.overlay.fadeOut(a.speedOut,c.proxy(this.close,this))}},h.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var b=h.current,d=b.title,e=a.type;if(c.isFunction(d)&&(d=d.call(b.element,b)),m(d)&&""!==c.trim(d)){switch(b=c('<div class="fancybox-title fancybox-title-'+e+'-wrap">'+d+"</div>"),e){case"inside":e=h.skin;break;case"outside":e=h.wrap;break;case"over":e=h.inner;break;default:e=h.skin,b.appendTo("body"),i&&b.width(b.width()),b.wrapInner('<span class="child"></span>'),h.current.margin[2]+=Math.abs(o(b.css("margin-bottom")))}b["top"===a.position?"prependTo":"appendTo"](e)}}},c.fn.fancybox=function(a){var b,d=c(this),e=this.selector||"",f=function(f){var j,k,g=c(this).blur(),i=b;!(f.ctrlKey||f.altKey||f.shiftKey||f.metaKey||g.is(".fancybox-wrap")||(j=a.groupAttr||"data-fancybox-group",k=g.attr(j),k||(j="rel",k=g.get(0)[j]),k&&""!==k&&"nofollow"!==k&&(g=e.length?c(e):d,g=g.filter("["+j+'="'+k+'"]'),i=g.index(this)),a.index=i,!1===h.open(g,a)||!f.preventDefault()))};return a=a||{},b=a.index||0,e&&!1!==a.live?g.undelegate(e,"click.fb-start").delegate(e+":not('.fancybox-item, .fancybox-nav')","click.fb-start",f):d.unbind("click.fb-start").bind("click.fb-start",f),this.filter("[data-fancybox-start=1]").trigger("click"),this},g.ready(function(){var b,f,g;c.scrollbarWidth===d&&(c.scrollbarWidth=function(){var a=c('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();return a.remove(),b}),c.support.fixedPosition===d&&(b=c.support,f=c('<div style="position:fixed;top:20px;"></div>').appendTo("body"),g=20===f[0].offsetTop||15===f[0].offsetTop,f.remove(),b.fixedPosition=g),c.extend(h.defaults,{scrollbarWidth:c.scrollbarWidth(),fixed:c.support.fixedPosition,parent:c("body")}),b=c(a).width(),e.addClass("fancybox-lock-test"),f=c(a).width(),e.removeClass("fancybox-lock-test"),c("<style type='text/css'>.fancybox-margin{margin-right:"+(f-b)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(a){var b=a.fancybox;b.helpers.buttons={defaults:{skipSingle:!1,position:"top",tpl:'<div id="fancybox-buttons"><ul><li><a class="btnPrev" title="Previous" href="javascript:;"></a></li><li><a class="btnPlay" title="Start slideshow" href="javascript:;"></a></li><li><a class="btnNext" title="Next" href="javascript:;"></a></li><li><a class="btnToggle" title="Toggle size" href="javascript:;"></a></li><li><a class="btnClose" title="Close" href="javascript:;"></a></li></ul></div>'},list:null,buttons:null,beforeLoad:function(a,b){return a.skipSingle&&b.group.length<2?(b.helpers.buttons=!1,b.closeBtn=!0,void 0):(b.margin["bottom"===a.position?2:0]+=30,void 0)},onPlayStart:function(){this.buttons&&this.buttons.play.attr("title","Pause slideshow").addClass("btnPlayOn")},onPlayEnd:function(){this.buttons&&this.buttons.play.attr("title","Start slideshow").removeClass("btnPlayOn")},afterShow:function(c,d){var e=this.buttons;e||(this.list=a(c.tpl).addClass(c.position).appendTo("body"),e={prev:this.list.find(".btnPrev").click(b.prev),next:this.list.find(".btnNext").click(b.next),play:this.list.find(".btnPlay").click(b.play),toggle:this.list.find(".btnToggle").click(b.toggle),close:this.list.find(".btnClose").click(b.close)}),d.index>0||d.loop?e.prev.removeClass("btnDisabled"):e.prev.addClass("btnDisabled"),d.loop||d.index<d.group.length-1?(e.next.removeClass("btnDisabled"),e.play.removeClass("btnDisabled")):(e.next.addClass("btnDisabled"),e.play.addClass("btnDisabled")),this.buttons=e,this.onUpdate(c,d)},onUpdate:function(a,b){var c;this.buttons&&(c=this.buttons.toggle.removeClass("btnDisabled btnToggleOn"),b.canShrink?c.addClass("btnToggleOn"):b.canExpand||c.addClass("btnDisabled"))},beforeClose:function(){this.list&&this.list.remove(),this.list=null,this.buttons=null}}}(jQuery),function(a,b,c){function d(a){return a}function e(a){return decodeURIComponent(a.replace(f," "))}var f=/\+/g,g=a.cookie=function(f,h,i){if(h!==c){if(i=a.extend({},g.defaults,i),null===h&&(i.expires=-1),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setDate(k.getDate()+j)}return h=g.json?JSON.stringify(h):String(h),b.cookie=[encodeURIComponent(f),"=",g.raw?h:encodeURIComponent(h),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(h=g.raw?d:e,i=b.cookie.split("; "),j=0;k=i[j]&&i[j].split("=");j++)if(h(k.shift())===f)return f=h(k.join("=")),g.json?JSON.parse(f):f;return null};g.defaults={},a.removeCookie=function(b,c){return null!==a.cookie(b)?(a.cookie(b,null,c),!0):!1}}(jQuery,document),com={elfvision:{}},com.elfvision.kit={},com.elfvision.kit.LocationSelect={},com.elfvision.ajax={},com.elfvision.DEBUG=!1,function(){var f,k,m,g,n,w,x,q,r,s,t,c,y,u,l,z,h,B,p,A,v;com.elfvision.DEBUG?(B=(new Date).getTime(),c=function(){for(var a=0,b=arguments.length,c=["[DEBUG at ",(new Date).getTime()-B," ] : "];b>a;a++)c.push(arguments[a]);void 0!==window.console&&"function"==typeof window.console.log&&console.log.apply(console,c)}):c=function(){},u=function(a,b){return function(){b.apply(a,arguments)}},y=function(a,b,d,e){c("attaching event",b,"on the object",a);var f=function(b){d.apply(e||a,[b])};void 0!==window.jQuery?jQuery(a).bind(b,f):document.addEventListener?a.addEventListener(b,f,!1):document.attachEvent&&(f=function(b){b||(b=window.event),d.apply(e||a,[{_event:b,type:b.type,target:b.srcElement,currentTarget:a,relatedTarget:b.fromElement?b.fromElement:b.toElement,eventPhase:b.srcElement==a?2:3,clientX:b.clientX,clientY:b.clientY,screenX:b.screenX,screenY:b.screenY,altKey:b.altKey,ctrlKey:b.ctrlKey,shiftKey:b.shiftKey,charCode:b.keyCode,stopPropagation:function(){this._event.cancelBubble=!0
},preventDefault:function(){this._event.returnValue=!1}}])},a.attachEvent("on"+b,f))},A=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],q={create:function(){var a,b,c;if(p)return p();for(a=0;a<A.length;a++)try{if(b=A[a],c=b())return p=b,c}catch(d){}p=function(){throw Error("XMLHttpRequest not supported")},p()}},r=function(a){if(!a.url)throw Error("getJson : Must provide url for the request!");var b=q.create();b.onreadystatechange=function(){var jsons,d;c("Request Object ",b),4!=b.readyState||200!=b.status&&0!==b.status||(c("JSON is successfully retrived according to ",a),a.callback&&(c("about to parse json"),jsons=b.responseText,d="undefined"==typeof JSON?eval("("+jsons+")"):JSON.parse(jsons),c("parsed ",d),a.callback.call(this,d)))},b.open("GET",a.url,!0),b.setRequestHeader("Cache-Control","max-age=0,no-cache,no-store,post-check=0,pre-check=0"),b.setRequestHeader("Expires","Mon, 26 Jul 1997 05:00:00 GMT"),b.send(null)},s=function(a,b){var d,e,c=document.createElement("script");b&&(d=/callback=(\w+)&*/,e=d.exec(a)[1],window[e]=function(a){b(a),window[e]=null}),c.src=a,document.getElementsByTagName("head")[0].appendChild(c)},t=function(a,b){var d=document.createElement("script");d.src=a,c("getting script",a),b&&(d.onload=b,d.onreadystatechange=function(){(4==d.readyState||"loaded"==d.readyState||"complete"==d.readyState)&&b()}),document.getElementsByTagName("head")[0].appendChild(d)},h=function(a,b){var c,d;if(Array.prototype.forEach)return Array.prototype.forEach.call(a,b);if(c=a.length>>>0,"function"!=typeof b)throw new TypeError;for(d=0;c>d;d++)d in a&&b.call(b,a[d],d,this)},z=function(a){return a&&"object"==typeof a&&a.constructor===Array?!0:void 0},l=function(){this.observers=[],this.guid=0},l.prototype.subscribe=function(a){var b=this.guid++;return this.observers[b]=a,b},l.prototype.unSubscribe=function(a){delete this.observers[a]},l.prototype.notify=function(a){var b,c;for(b in this.observers)c=this.observers[b],c instanceof Function?c.call(this,a):c.update.call(this,a)},f=function(a){this.onRowsInserted=new l,this.onRowsRemoved=new l,this.onRowsUpdated=new l,this.onSelectedIndexChanged=new l,this.items=[],this.selectedIndex=0,this.level=a.level||0,this.label=a.label||"Select..."},f.prototype.read=function(a){return a?(c("reading items["+a+"]:",this.items[a]),this.items[a]):this.items},f.prototype.insert=function(a){z(a)?(a=[a],this.items=this.items.concat(a)):this.items.push(a),this.onRowsInserted.notify({source:this,items:a})},f.prototype.remove=function(a){var b;a?h(this.items,function(c,d){c.id===a&&(b=c,this.items.splice(d,1))}):this.items=[],c("notifying removing"),this.onRowsRemoved.notify({source:this,items:[b]})},f.prototype.update=function(a){a=a||[],c("updating list model with ",a),this.items=[{id:0,text:this.label}].concat(a),c("notifying updating"),this.onRowsUpdated.notify({source:this,items:a})},f.prototype.getSelectedIndex=function(){return this.selectedIndex},f.prototype.setSelectedIndex=function(a){var b=this.getSelectedIndex();b!==a&&(this.selectedIndex=a,c("notifying index changed",a),this.onSelectedIndexChanged.notify({source:this,previous:b,present:a,previousItem:this.read(b),presentItem:this.read(a),level:this.level}))},k=function(a){this.model=a.model,this.controller=a.controller,this.element=a.element,a=u(this,this.rebuildList);var b=u(this.controller.parent,this.controller.parent.update);this.model.onRowsInserted.subscribe(a),this.model.onRowsRemoved.subscribe(a),this.model.onRowsUpdated.subscribe(a),this.model.onSelectedIndexChanged.subscribe(b),c("this list item",this),y(this.element,"change",this.controller.updateSelectedIndex,this.controller)},k.prototype.show=function(){this.element.style.display="inline-block"},k.prototype.hide=function(){this.element.style.display="none"},k.prototype.rebuildList=function(a){var b,d;a&&a.present&&0===a.present?this.elements.list.selectedIndex=0:(c("Rebuilding list ",this),b=this.element,a=this.model.read(),b.innerHTML="",c(a.length),h(a,function(a){d=new Option,d.setAttribute("value",a.id?a.text:""),d.appendChild(document.createTextNode(a.text)),b.appendChild(d)}),this.model.setSelectedIndex(0))},m=function(a){this.parent=a.parent,this.model=new f({level:a.level,label:a.label}),this.view=new k({model:this.model,controller:this,element:a.element})},m.prototype.refresh=function(a){c("refresh data with ",a),this.model.update(a)},m.prototype.updateSelectedIndex=function(a){this.model.setSelectedIndex(a.target.selectedIndex)},m.prototype.selectByText=function(a){var b=this;h(this.model.read(),function(d,e){d.text.match("^"+a)==a&&(c("auto detected ",d,e),b.model.setSelectedIndex(e),b.view.element.selectedIndex=e)})},m.prototype.selectByID=function(a){var b=this;h(this.model.read(),function(d,e){d.id.toString().match("^"+a)==a&&(c("auto detected ",d,e),b.model.setSelectedIndex(e),b.view.element.selectedIndex=e)})},m.prototype.getValue=function(){return this.model.read(this.model.getSelectedIndex()).text},g=function(a){this.labels=a.labels,this.currentGeo={},this.lists=[],this.elements=a.elements,this.parent=a.parent},g.prototype.init=function(){c("init select group");for(var a=0,b=this.labels.length;b>a;a++)this.lists.push(new m({label:this.labels[a],element:this.elements[a],level:a,parent:this}));c("lists built ",this),c(this.parent.listHelper.find(-1)),this.lists[0].refresh(this.parent.listHelper.find(-1)),this.lists[0].view.show()},g.prototype.update=function(a){if(a.level!=this.lists.length-1)if(c("Updating SelectGroup contents",this),0===a.present){a=a.level+1;for(var b=this.lists.length;b>a;a++)this.lists[a].refresh(),this.lists[a].view.hide()}else{switch(a.level){case 0:this.currentGeo.province=a.presentItem.text;break;case 1:this.currentGeo.city=a.presentItem.text;break;case 2:this.currentGeo.district=a.presentItem.text}this.lists[a.level+1].refresh(this.parent.listHelper.find(a.level,a.presentItem.id)),this.lists[a.level+1].view.show()}},g.prototype.setValues=function(a){c("setting group values",a);var b=this;h(a,function(a,c){a&&b.lists[c].selectByText(a)})},g.prototype.setValuesID=function(a){c("setting group values",a);var b=this;h(a,function(a,c){a&&b.lists[c].selectByID(a)})},g.prototype.setValuesCode=function(a){c("setting group values",a);var b=this;h(a,function(a,c){a&&b.lists[c].selectByText(a)})},g.prototype.getValues=function(){var a=[];return h(this.lists,function(b){a.push(b.getValue())}),a},n=function(a){this.detectGeoLocation=void 0===a.detectGeoLocation?!0:a.detectGeoLocation,this.detector=a.detector||w,this.listHelper=a.listHelper||x.getInstance({dataUrl:a.dataUrl}),this.selectGroup=new g({parent:this,labels:a.labels,elements:a.elements});var b=this;this.listHelper.fetch(function(){c("exec fetech callback"),b.selectGroup.init(),b.detectGeoLocation&&b.detector()})},n.prototype.report=function(){return this.selectGroup.getValues()},n.prototype.select=function(a){this.selectGroup.setValues(a)},n.prototype.selectID=function(a){this.selectGroup.setValuesID(a)},w=function(){c("Detect!!!!");var b,a=this;t("http://j.maxmind.com/app/geoip.js",function(){c("Maxmind API Loaded!"),b="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%0A%20%20url%3D%22http%3A%2F%2Fmaps.google.com%2Fmaps%2Fapi%2Fgeocode%2Fjson%3Flatlng%3D"+geoip_latitude()+"%2C"+geoip_longitude()+"%26sensor%3Dfalse%26language%3Dzh-CN%22&format=json&diagnostics=true&callback=locationselectcb",s(b,function(b){if(c("Geocoder Request Completed through YQL ",b),"OK"===b.query.results.json.status){b=b.query.results.json.results[0].address_components;var d,e;c("Geocoder statuts ok",b),h(b,function(a){var b=a.types[0];"locality"===b?d=a.long_name:"administrative_area_level_1"===b&&(e=a.long_name)}),a.select([e,d])}})})},x={getInstance:function(a){if(!v){var d,b=a.dataUrl||"js/areas.js",e={};d={get:function(a){return e[a]},set:function(a,b){e[a]=b}},v={fetch:function(a){c("feteching areas data"),r({url:b,callback:function(b){c("area data : ",b),d.set("province",b.province),d.set("city",b.city),d.set("district",b.district),a()}})},find:function(a,b){var f,g,i,e=[];return c("querying by record id : ",b,"by list in level : ",a),d.get(b)?(c("lucky! we have it cached"),e=d.get(b)):(c("finding it in areas data"),-1===a?(c("this is a query for province data"),e=d.get("province")):(f=b.toString().substring(0,2*(a+1)),g=RegExp("^"+f+"\\d*"),i=0===a?d.get("city"):d.get("district"),h(i,function(a,b){g.test(a.id)&&e.push(i[b])}))),c("Return results : ",e),e}}}return v}},com.elfvision.kit.LocationSelect=n,com.elfvision.ajax.XhrFactory=q,com.elfvision.ajax.getJson=r,com.elfvision.ajax.jsonp=s,com.elfvision.ajax.getScript=t}(),void 0!==window.jQuery&&($.LocationSelect={build:function(a){var b;return a.elements=this.get(),b=new com.elfvision.kit.LocationSelect(a),$.LocationSelect.all[a.name]=b,this}},$.LocationSelect.all={},$.fn.LocationSelect=$.LocationSelect.build),_ajax_uploader=_ajax_uploader||{},_ajax_uploader.extend=function(a,b){for(var c in b)a[c]=b[c]},_ajax_uploader.indexOf=function(a,b,c){if(a.indexOf)return a.indexOf(b,c);c=c||0;var d=a.length;for(0>c&&(c+=d);d>c;c++)if(c in a&&a[c]===b)return c;return-1},_ajax_uploader.getUniqueId=function(){var a=0;return function(){return a++}}(),_ajax_uploader.attach=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},_ajax_uploader.detach=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.attachEvent&&a.detachEvent("on"+b,c)},_ajax_uploader.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},_ajax_uploader.insertBefore=function(a,b){b.parentNode.insertBefore(a,b)},_ajax_uploader.remove=function(a){a.parentNode.removeChild(a)},_ajax_uploader.contains=function(a,b){return a==b?!0:a.contains?a.contains(b):!!(8&b.compareDocumentPosition(a))},_ajax_uploader.toElement=function(){var a=document.createElement("div");return function(b){a.innerHTML=b;var c=a.firstChild;return a.removeChild(c),c}}(),_ajax_uploader.css=function(a,b){null!=b.opacity&&"string"!=typeof a.style.opacity&&"undefined"!=typeof a.filters&&(b.filter="alpha(opacity="+Math.round(100*b.opacity)+")"),_ajax_uploader.extend(a.style,b)},_ajax_uploader.hasClass=function(a,b){var c=new RegExp("(^| )"+b+"( |$)");return c.test(a.className)},_ajax_uploader.addClass=function(a,b){_ajax_uploader.hasClass(a,b)||(a.className+=" "+b)},_ajax_uploader.removeClass=function(a,b){var c=new RegExp("(^| )"+b+"( |$)");a.className=a.className.replace(c," ").replace(/^\s+|\s+$/g,"")},_ajax_uploader.setText=function(a,b){a.innerText=b,a.textContent=b},_ajax_uploader.setHTML=function(a,b){a.innerHTML=b},_ajax_uploader.children=function(a){for(var b=[],c=a.firstChild;c;)1==c.nodeType&&b.push(c),c=c.nextSibling;return b},_ajax_uploader.getByClass=function(a,b){var c,d,e,f;if(a.querySelectorAll)return a.querySelectorAll("."+b);for(c=[],d=a.getElementsByTagName("*"),e=d.length,f=0;e>f;f++)_ajax_uploader.hasClass(d[f],b)&&c.push(d[f]);return c},_ajax_uploader.obj2url=function(a,b,c){var g,h,d=[],e="&",f=function(a,c){var e=b?/\[\]$/.test(b)?b:b+"["+c+"]":c;"undefined"!=e&&"undefined"!=c&&d.push("object"==typeof a?_ajax_uploader.obj2url(a,e,!0):"[object Function]"===Object.prototype.toString.call(a)?encodeURIComponent(e)+"="+encodeURIComponent(a()):encodeURIComponent(e)+"="+encodeURIComponent(a))};if(!c&&b)e=/\?/.test(b)?/\?$/.test(b)?"":"&":"?",d.push(b),d.push(_ajax_uploader.obj2url(a));else if("[object Array]"===Object.prototype.toString.call(a)&&"undefined"!=typeof a)for(g=0,h=a.length;h>g;++g)f(a[g],g);else if("undefined"!=typeof a&&null!==a&&"object"==typeof a)for(g in a)f(a[g],g);else d.push(encodeURIComponent(b)+"="+encodeURIComponent(a));return d.join(e).replace(/^&/,"").replace(/%20/g,"+")},_ajax_uploader=_ajax_uploader||{},_ajax_uploader.FileUploaderBasic=function(a){this._options={debug:!1,action:"/server/upload",params:{},button:null,multiple:!0,maxConnections:3,allowedExtensions:[],sizeLimit:0,minSizeLimit:0,onSubmit:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},messages:{typeError:_t("{file} 是个无效文件, 只接受下列文件: {extensions}"),sizeError:_t("{file} 文件尺寸太大, 最大文件尺寸为: {sizeLimit}"),minSizeError:_t("{file} 文件尺寸太小, 最小文件尺寸为:  {minSizeLimit}"),emptyError:_t("{file} 是个空文件, 请重新选择"),onLeave:_t("文件正在上传, 是否中断继续")},showMessage:function(a){$.alert(a)}},_ajax_uploader.extend(this._options,a),this._filesInProgress=0,this._handler=this._createUploadHandler(),this._options.button&&(this._button=this._createUploadButton(this._options.button)),this._preventLeaveInProgress()},_ajax_uploader.FileUploaderBasic.prototype={setParams:function(a){this._options.params=a},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(a){var b=this;return new _ajax_uploader.UploadButton({element:a,multiple:this._options.multiple&&_ajax_uploader.UploadHandlerXhr.isSupported(),onChange:function(a){b._onInputChange(a)}})},_createUploadHandler:function(){var b,c,a=this;return b=_ajax_uploader.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm",c=new _ajax_uploader[b]({debug:this._options.debug,action:this._options.action,maxConnections:this._options.maxConnections,onProgress:function(b,c,d,e){a._onProgress(b,c,d,e),a._options.onProgress(b,c,d,e)},onComplete:function(b,c,d){a._onComplete(b,c,d),a._options.onComplete(b,c,d)},onCancel:function(b,c){a._onCancel(b,c),a._options.onCancel(b,c)}})},_preventLeaveInProgress:function(){var a=this;_ajax_uploader.attach(window,"beforeunload",function(b){if(a._filesInProgress){var b=b||window.event;return b.returnValue=a._options.messages.onLeave,a._options.messages.onLeave}})},_onSubmit:function(){this._filesInProgress++},_onProgress:function(){},_onComplete:function(a,b,c){this._filesInProgress--,c.error&&this._options.showMessage(c.error)},_onCancel:function(){this._filesInProgress--},_onInputChange:function(a){this._handler instanceof _ajax_uploader.UploadHandlerXhr?this._uploadFileList(a.files):this._validateFile(a)&&this._uploadFile(a),this._button.reset()},_uploadFileList:function(a){var b;for(b=0;b<a.length;b++)if(!this._validateFile(a[b]))return;for(b=0;b<a.length;b++)this._uploadFile(a[b])},_uploadFile:function(a){var b=this._handler.add(a),c=this._handler.getName(b);this._options.onSubmit(b,c)!==!1&&(this._onSubmit(b,c),this._handler.upload(b,this._options.params))},_validateFile:function(a){var b,c;return a.value?b=a.value.replace(/.*(\/|\\)/,""):(b=null!=a.fileName?a.fileName:a.name,c=null!=a.fileSize?a.fileSize:a.size),this._isAllowedExtension(b)?0===c?(this._error("emptyError",b),!1):c&&this._options.sizeLimit&&c>this._options.sizeLimit?(this._error("sizeError",b),!1):c&&c<this._options.minSizeLimit?(this._error("minSizeError",b),!1):!0:(this._error("typeError",b),!1)},_error:function(a,b){function d(a,b){c=c.replace(a,b)}var c=this._options.messages[a];d("{file}",this._formatFileName(b)),d("{extensions}",this._options.allowedExtensions.join(", ")),d("{sizeLimit}",this._formatSize(this._options.sizeLimit)),d("{minSizeLimit}",this._formatSize(this._options.minSizeLimit)),this._options.showMessage(c)},_formatFileName:function(a){return a.length>33&&(a=a.slice(0,19)+"..."+a.slice(-13)),a},_isAllowedExtension:function(a){var d,b=-1!==a.indexOf(".")?a.replace(/.*[.]/,"").toLowerCase():"",c=this._options.allowedExtensions;if(!c.length)return!0;for(d=0;d<c.length;d++)if(c[d].toLowerCase()==b)return!0;return!1},_formatSize:function(a){var b=-1;do a/=1024,b++;while(a>99);return Math.max(a,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][b]}},_ajax_uploader.FileUploader=function(a){return navigator.userAgent.match(/like Mac OS X/)||"Y"!=G_UPLOAD_ENABLE?!1:(_ajax_uploader.FileUploaderBasic.apply(this,arguments),_ajax_uploader.extend(this._options,{element:null,listElement:null,template:'<a href="javascript:;" class="_ajax_upload-button aw-btn b-up-load"></a><div class="aw-file-uploader _ajax_upload-list clearfix" id="upload-ul"></div>',fileTemplate:'<dl><dt class="upload-loading aw-icon"></dt><dd><p class="_ajax_upload-file aw-file-uploader-name"></p><p class="_ajax_upload-size aw-text-color-999"></p><p class="_ajax_upload-inset"><a href="javascript:;" class="_ajax_upload_delete_file" onclick="if (confirm(\''+_t("确认删除?")+"')) { _ajax_uploader_delete_attach(this.href, $(this).parents('dl')) } return false;\">"+_t("删除")+"</a> </p>"+"</dd>"+"</dl>",classes:{button:"_ajax_upload-button",drop:"_ajax_upload-drop-area",dropActive:"_ajax_upload-drop-area-active",list:"_ajax_upload-list",file:"_ajax_upload-file",spinner:"upload-loading",size:"_ajax_upload-size",success:"_ajax_upload-success",fail:"error",inset:"_ajax_upload-inset"}}),_ajax_uploader.extend(this._options,a),this._element=this._options.element,$(this._element).html(this._options.template),this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button=this._createUploadButton(this._find(this._element,"button")),void 0)},_ajax_uploader.extend(_ajax_uploader.FileUploader.prototype,_ajax_uploader.FileUploaderBasic.prototype),_ajax_uploader.extend(_ajax_uploader.FileUploader.prototype,{_find:function(a,b){var c=_ajax_uploader.getByClass(a,this._options.classes[b])[0];if(!c)throw new Error("element not found "+b);return c},_setupDragDrop:function(){var a=this,b=this._find(this._element,"drop"),c=new _ajax_uploader.UploadDropZone({element:b,onEnter:function(c){_ajax_uploader.addClass(b,a._classes.dropActive),c.stopPropagation()},onLeave:function(a){a.stopPropagation()},onLeaveNotDescendants:function(){_ajax_uploader.removeClass(b,a._classes.dropActive)},onDrop:function(c){b.style.display="none",_ajax_uploader.removeClass(b,a._classes.dropActive),a._uploadFileList(c.dataTransfer.files)}});b.style.display="none",_ajax_uploader.attach(document,"dragenter",function(a){c._isValidFileDrag(a)&&(b.style.display="block")}),_ajax_uploader.attach(document,"dragleave",function(a){if(c._isValidFileDrag(a)){var d=document.elementFromPoint(a.clientX,a.clientY);d&&"HTML"!=d.nodeName||(b.style.display="none")}})},_onSubmit:function(a,b){_ajax_uploader.FileUploaderBasic.prototype._onSubmit.apply(this,arguments),this._addToList(a,b)},_onProgress:function(a,b,c,d){var e,f,g;_ajax_uploader.FileUploaderBasic.prototype._onProgress.apply(this,arguments),e=this._getItemByFileId(a),f=this._find(e,"size"),f.style.display="",g=c!=d?Math.round(100*(c/d))+"%":this._formatSize(d),_ajax_uploader.setHTML(f,g)},_onComplete:function(a,b,c){_ajax_uploader.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var d=this._getItemByFileId(a);c.success?("undefined"!=typeof c.delete_url&&(_ajax_uploader.getByClass(d,"_ajax_upload_delete_file")[0].href=c.delete_url.replace(/&amp;/g,"&")),"undefined"!=typeof c.thumb?($(this._find(d,"spinner")).css("background-image","url("+c.thumb+")").attr("rel",c.thumb),"undefined"!=typeof c.attach_id&&$("<a/>").attr("href","javascript:;").attr("onclick","insert_attach(this,"+c.attach_id+",'"+c.attach_tag+"')").html("插入").appendTo($(this._find(d,"inset")))):"undefined"!=typeof c.class_name?_ajax_uploader.addClass(this._find(d,"spinner"),"upload-"+c.class_name):_ajax_uploader.addClass(d,this._classes.success)):(/MSIE/.test(navigator.userAgent)||(_ajax_uploader.getByClass(d,"_ajax_upload_delete_file")[0].style.display="none"),_ajax_uploader.addClass(this._find(d,"spinner"),"upload-error"),_ajax_uploader.addClass(d,this._classes.fail),_ajax_uploader.getByClass(d,"_ajax_upload_delete_file")[0].style.display="none"),_ajax_uploader.removeClass(this._find(d,"spinner"),this._classes.spinner)},_addToList:function(a,b){var d,c=_ajax_uploader.toElement(this._options.fileTemplate);c.qqFileId=a,d=this._find(c,"file"),_ajax_uploader.setText(d,this._formatFileName(b)),this._find(c,"size").style.display="none",this._listElement.appendChild(c)},_getItemByFileId:function(a){for(var b=this._listElement.firstChild;b;){if(b.qqFileId==a)return b;b=b.nextSibling}},_bindCancelEvent:function(){var a=this,b=this._listElement;_ajax_uploader.attach(b,"click",function(b){var c,d;b=b||window.event,c=b.target||b.srcElement,_ajax_uploader.hasClass(c,a._classes.cancel)&&(_ajax_uploader.preventDefault(b),d=c.parentNode,a._handler.cancel(d.qqFileId),_ajax_uploader.remove(d))})}}),_ajax_uploader.UploadDropZone=function(a){this._options={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}},_ajax_uploader.extend(this._options,a),this._element=this._options.element,this._disableDropOutside(),this._attachEvents()},_ajax_uploader.UploadDropZone.prototype={_disableDropOutside:function(){_ajax_uploader.UploadDropZone.dropOutsideDisabled||(_ajax_uploader.attach(document,"dragover",function(a){a.dataTransfer&&(a.dataTransfer.dropEffect="none",a.preventDefault())}),_ajax_uploader.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var a=this;_ajax_uploader.attach(a._element,"dragover",function(b){if(a._isValidFileDrag(b)){var c=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect="move"==c||"linkMove"==c?"move":"copy",b.stopPropagation(),b.preventDefault()}}),_ajax_uploader.attach(a._element,"dragenter",function(b){a._isValidFileDrag(b)&&a._options.onEnter(b)}),_ajax_uploader.attach(a._element,"dragleave",function(b){if(a._isValidFileDrag(b)){a._options.onLeave(b);var c=document.elementFromPoint(b.clientX,b.clientY);_ajax_uploader.contains(this,c)||a._options.onLeaveNotDescendants(b)}}),_ajax_uploader.attach(a._element,"drop",function(b){a._isValidFileDrag(b)&&(b.preventDefault(),a._options.onDrop(b))})},_isValidFileDrag:function(a){var b=a.dataTransfer,c=navigator.userAgent.indexOf("AppleWebKit")>-1;return b&&"none"!=b.effectAllowed&&(b.files||!c&&b.types.contains&&b.types.contains("Files"))}},_ajax_uploader.UploadButton=function(a){this._options={element:null,multiple:!1,name:"file",onChange:function(){},hoverClass:"_ajax_upload-button-hover",focusClass:"_ajax_upload-button-focus"},_ajax_uploader.extend(this._options,a),this._element=this._options.element,_ajax_uploader.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"}),this._input=this._createInput()},_ajax_uploader.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&_ajax_uploader.remove(this._input),_ajax_uploader.removeClass(this._element,this._options.focusClass),this._input=this._createInput()},_createInput:function(){var b,a=document.createElement("input");return this._options.multiple&&a.setAttribute("multiple","multiple"),a.setAttribute("type","file"),a.setAttribute("name",this._options.name),_ajax_uploader.css(a,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),this._element.appendChild(a),b=this,_ajax_uploader.attach(a,"change",function(){b._options.onChange(a)}),_ajax_uploader.attach(a,"mouseover",function(){_ajax_uploader.addClass(b._element,b._options.hoverClass)}),_ajax_uploader.attach(a,"mouseout",function(){_ajax_uploader.removeClass(b._element,b._options.hoverClass)}),_ajax_uploader.attach(a,"focus",function(){_ajax_uploader.addClass(b._element,b._options.focusClass)}),_ajax_uploader.attach(a,"blur",function(){_ajax_uploader.removeClass(b._element,b._options.focusClass)}),window.attachEvent&&a.setAttribute("tabIndex","-1"),a}},_ajax_uploader.UploadHandlerAbstract=function(a){this._options={debug:!1,action:G_BASE_URL+"/upload.php",maxConnections:999,onProgress:function(){},onComplete:function(){},onCancel:function(){}},_ajax_uploader.extend(this._options,a),this._queue=[],this._params=[]},_ajax_uploader.UploadHandlerAbstract.prototype={log:function(a){this._options.debug&&window.console&&console.log("[uploader] "+a)},add:function(){},upload:function(a,b){var c=this._queue.push(a),d={};_ajax_uploader.extend(d,b),this._params[a]=d,c<=this._options.maxConnections&&this._upload(a,this._params[a])},cancel:function(a){this._cancel(a),this._dequeue(a)},cancelAll:function(){for(var a=0;a<this._queue.length;a++)this._cancel(this._queue[a]);this._queue=[]},getName:function(){},getSize:function(){},getQueue:function(){return this._queue},_upload:function(){},_cancel:function(){},_dequeue:function(a){var c,d,b=_ajax_uploader.indexOf(this._queue,a);this._queue.splice(b,1),c=this._options.maxConnections,this._queue.length>=c&&c>b&&(d=this._queue[c-1],this._upload(d,this._params[d]))}},_ajax_uploader.UploadHandlerForm=function(){_ajax_uploader.UploadHandlerAbstract.apply(this,arguments),this._inputs={}},_ajax_uploader.extend(_ajax_uploader.UploadHandlerForm.prototype,_ajax_uploader.UploadHandlerAbstract.prototype),_ajax_uploader.extend(_ajax_uploader.UploadHandlerForm.prototype,{add:function(a){a.setAttribute("name","qqfile");var b="_ajax_upload-handler-iframe"+_ajax_uploader.getUniqueId();return this._inputs[b]=a,a.parentNode&&_ajax_uploader.remove(a),b},getName:function(a){return this._inputs[a].value.replace(/.*(\/|\\)/,"")},_cancel:function(a){this._options.onCancel(a,this.getName(a)),delete this._inputs[a];var b=document.getElementById(a);b&&(b.setAttribute("src","javascript:false;"),_ajax_uploader.remove(b))},_upload:function(a,b){var d,e,f,g,c=this._inputs[a];if(!c)throw new Error("file with passed id was not added, or already uploaded or cancelled");return d=this.getName(a),e=this._createIframe(a),f=this._createForm(e,b),f.appendChild(c),g=this,this._attachLoadEvent(e,function(){g.log("iframe loaded");var b=g._getIframeContentJSON(e);g._options.onComplete(a,d,b),g._dequeue(a),delete g._inputs[a],setTimeout(function(){_ajax_uploader.remove(e)},1)}),f.submit(),_ajax_uploader.remove(f),a},_attachLoadEvent:function(a,b){_ajax_uploader.attach(a,"load",function(){a.parentNode&&(a.contentDocument&&a.contentDocument.body&&"false"==a.contentDocument.body.innerHTML||b())})},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response;this.log("converting iframe's innerHTML to JSON"),this.log("innerHTML = "+doc.body.innerHTML);try{response=eval("("+doc.body.innerHTML+")")}catch(err){response={}}return response},_createIframe:function(a){var b=_ajax_uploader.toElement('<iframe src="javascript:false;" name="'+a+'" />');return b.setAttribute("id",a),b.style.display="none",document.body.appendChild(b),b},_createForm:function(a,b){var c=_ajax_uploader.toElement('<form method="post" enctype="multipart/form-data"></form>'),d=_ajax_uploader.obj2url(b,this._options.action);return c.setAttribute("action",d),c.setAttribute("target",a.name),c.style.display="none",document.body.appendChild(c),c}}),_ajax_uploader.UploadHandlerXhr=function(){_ajax_uploader.UploadHandlerAbstract.apply(this,arguments),this._files=[],this._xhrs=[],this._loaded=[]},_ajax_uploader.UploadHandlerXhr.isSupported=function(){var a=document.createElement("input");return a.type="file","multiple"in a&&"undefined"!=typeof File&&"undefined"!=typeof(new XMLHttpRequest).upload},_ajax_uploader.extend(_ajax_uploader.UploadHandlerXhr.prototype,_ajax_uploader.UploadHandlerAbstract.prototype),_ajax_uploader.extend(_ajax_uploader.UploadHandlerXhr.prototype,{add:function(a){if(!(a instanceof File))throw new Error("Passed obj in not a File (in _ajax_uploader.UploadHandlerXhr)");return this._files.push(a)-1},getName:function(a){var b=this._files[a];return null!=b.fileName?b.fileName:b.name},getSize:function(a){var b=this._files[a];return null!=b.fileSize?b.fileSize:b.size},getLoaded:function(a){return this._loaded[a]||0},_upload:function(a,b){var f,g,h,c=this._files[a],d=this.getName(a);this.getSize(a),this._loaded[a]=0,f=this._xhrs[a]=new XMLHttpRequest,g=this,f.upload.onprogress=function(b){b.lengthComputable&&(g._loaded[a]=b.loaded,g._options.onProgress(a,d,b.loaded,b.total))},f.onreadystatechange=function(){4==f.readyState&&g._onComplete(a,f)},b=b||{},b.qqfile=d,h=_ajax_uploader.obj2url(b,this._options.action),f.open("POST",h,!0),f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.setRequestHeader("X-File-Name",encodeURIComponent(d)),f.setRequestHeader("Content-Type","application/octet-stream"),f.send(c)},_onComplete:function(id,xhr){var name,size,response;if(this._files[id]){if(name=this.getName(id),size=this.getSize(id),this._options.onProgress(id,name,size,size),200==xhr.status){this.log("xhr - server response received"),this.log("responseText = "+xhr.responseText);try{response=eval("("+xhr.responseText+")")}catch(err){response={}}this._options.onComplete(id,name,response)}else this._options.onComplete(id,name,{});this._files[id]=null,this._xhrs[id]=null,this._dequeue(id)}},_cancel:function(a){this._options.onCancel(a,this.getName(a)),this._files[a]=null,this._xhrs[a]&&(this._xhrs[a].abort(),this._xhrs[a]=null)}});