<?php TPL::output('global/header_landing.tpl.htm'); ?><script type="text/javascript">	$(document).ready(function () {		$('#header_action').append('<?php _e('注册新用户'); ?>');	});</script><div class="aw-register-box">	<form class="aw-register-form" action="account/ajax/register_process/" method="post" id="register_form">		<?php if ($this->icode) { ?><input type="hidden" name="icode" id="icode" value="<?php echo $this->icode; ?>" /><?php } ?>		<?php if ($this->return_url) { ?><input type="hidden" name="return_url" value="<?php echo $this->return_url; ?>" /><?php } ?>		<?php if ($this->fromuid AND $_GET['invite_question_id']) { ?>		  	<input type="hidden" name="invite_question_id" value="<?php echo htmlspecialchars($_GET['invite_question_id']); ?>"/> 		<?php } ?>		<ul>			<li class="error error-message hide">				<p><i class="fa fa-times"></i><em></em></p>			</li>			<li>				<input class="aw-register-name form-control" type="text" name="user_name" placeholder="<?php _e('用户名'); ?>" tips="<?php _e('请输入一个 2-14 位的用户名');?>" errortips="<?php _e('用户名长度不符合');?>" value="" />			</li>			<li>				<input class="aw-register-email form-control" type="text" placeholder="<?php _e('邮箱'); ?>" name="email" tips="<?php _e('请输入你常用的电子邮箱作为你的账号'); ?>" errortips="<?php _e('邮箱格式不正确'); ?>" />			</li>			<li>				<input class="aw-register-pwd form-control" type="password" name="password" placeholder="密码" tips="<?php _e('请输入 6-16 个字符,区分大小写'); ?>" errortips="<?php _e('密码不符合规则'); ?>" />			</li>			<?php if (get_setting('register_seccode') == 'Y') { ?>			<li class="aw-register-verify">				<img class="pull-right" id="captcha" onclick="this.src = G_BASE_URL + '/account/captcha/' + Math.floor(Math.random() * 10000);" src="">								<input type="text" class="form-control" name="seccode_verify" placeholder="<?php _e('验证码'); ?>" tips="<?php _e('验证码不区分大小写,点击图片可换一张'); ?>" />			</li>			<?php } ?>			<li class="last">				<label><input type="checkbox" checked="checked" value="agree" name="agreement_chk" /> <?php _e('我同意'); ?></label> <a href="javascript:;" onclick="$('.aw-regiter-agreement').show();"><?php _e('用户协议'); ?></a>				<a href="account/login/" class="pull-right">已有账号?</a>				<div class="aw-regiter-agreement hide">					<div class="aw-register-agreement-txt" id="register_agreement"></div>				</div>							</li>			<li class="clearfix">				<button class="pull-right btn btn-large btn-success" onclick="ajax_post($('#register_form'), _error_message_form_processer); return false;"><?php _e('注册'); ?></button>			</li>		</ul>	</form></div><script type="text/javascript">$(document).ready(function (){	$.get(G_BASE_URL + '/account/ajax/register_agreement/', function (result) { $('#register_agreement').html(result.err); }, 'json');	    verify_register_form('#register_form');    /* 注册页面验证 */	function verify_register_form(element)	{	    $(element).find('[type=text], [type=password]').on({	        focus : function()	        {	            if ($(this).attr('tips') != 'undefined' || $(this).attr('tips') != '')	            {	                $(this).parent().append('<span class="aw-reg-tips">' + $(this).attr('tips') + '</span>');	            }	        },	        blur : function()	        {	            switch ($(this).attr('name'))	            {	                case 'user_name' : 	                    var _this = $(this);	                    $(this).parent().find('.aw-reg-tips').detach();	                    if ($(this).val().length >= 0 && $(this).val().length < 2)	                    {	                        $(this).parent().find('.aw-reg-tips').detach();	                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');	                        return;	                    }	                    if ($(this).val().length > 17)	                    {	                        $(this).parent().find('.aw-reg-tips').detach();	                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');	                        return;	                    }	                    else	                    {	                        $.get(G_BASE_URL + '/account/ajax/check_username/username' + '-' + encodeURIComponent($(this).val()), function (result)	                        {	                            if (result.errno == -1)	                            {	                                _this.parent().find('.aw-reg-tips').detach();	                                _this.parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + result.err + '</span>');	                            }	                            else	                            {	                                _this.parent().find('.aw-reg-tips').detach();	                                _this.parent().append('<span class="aw-reg-tips aw-reg-right"><i class="aw-icon i-followed"></i></span>');	                            }	                        }, 'json');	                    }	                    return;	                case 'email' : 	                    $(this).parent().find('.aw-reg-tips').detach();	                    var emailreg = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;	                    if (!emailreg.test($(this).val()))	                    {	                        $(this).parent().find('.aw-reg-tips').detach();	                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');	                        return;	                    }	                    else	                    {	                        $(this).parent().find('.aw-reg-tips').detach();	                        $(this).parent().append('<span class="aw-reg-tips aw-reg-right"><i class="aw-icon i-followed"></i></span>');	                    }        	                    return;	                case 'password' :	                    $(this).parent().find('.aw-reg-tips').detach();	                    if ($(this).val().length >= 0 && $(this).val().length < 6)	                    {	                        $(this).parent().find('.aw-reg-tips').detach();	                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');	                        return;	                    }	                    if ($(this).val().length > 17)	                    {	                        $(this).parent().find('.aw-reg-tips').detach();	                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');	                        return;	                    }	                    else	                    {	                        $(this).parent().find('.aw-reg-tips').detach();	                        $(this).parent().append('<span class="aw-reg-tips aw-reg-right"><i class="aw-icon i-followed"></i></span>');	                    }	                    return;	            }	        }	    });	}});</script><?php TPL::output('global/footer_blank.tpl.htm'); ?>